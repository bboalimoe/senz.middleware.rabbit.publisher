//a = {"hospital":0.00012083070578598663,"bath_sauna":0.00012083070578598663,"drugstore":0.00012083070578598663,"vegetarian_diet":0.00012083070578598663,"talent_market":0.00012083070578598663,"business_building":0.41153819880696396,"comprehensive_market":0.00012083070578598663,"motel":0.00012083070578598663,"stationer":0.00012083070578598663,"high_school":0.00012083070578598663,"insurance_company":0.00012083070578598663,"resort":0.00012083070578598663,"digital_store":0.00012083070578598663,"cigarette_store":0.00012083070578598663,"pawnshop":0.00012083070578598663,"auto_sale":0.00012083070578598663,"japan_korea_restaurant":0.00012083070578598663,"toll_station":0.00012083070578598663,"salvage_station":0.00012083070578598663,"newstand":0.00012083070578598663,"western_restaurant":0.00012083070578598663,"car_maintenance":0.00012083070578598663,"barbershop":0.00012083070578598663,"chafing_dish":0.00012083070578598663,"buffet":0.00012083070578598663,"convenience_store":0.00012083070578598663,"odeum":0.00012083070578598663,"pet_service":0.00012083070578598663,"traffic":0.027554735134711638,"cinema":0.00012083070578598663,"coffee":0.00012083070578598663,"auto_repair":0.00012083070578598663,"bar":0.00012083070578598663,"hostel":0.00012083070578598663,"video_store":0.00012083070578598663,"game_room":0.00012083070578598663,"laundry":0.00012083070578598663,"photographic_studio":0.00012083070578598663,"ktv":0.00012083070578598663,"exhibition_hall":0.00012083070578598663,"bank":0.00012083070578598663,"night_club":0.00012083070578598663,"bike_store":0.00012083070578598663,"furniture_store":0.00012083070578598663,"travel_agency":0.00012083070578598663,"technical_school":0.00012083070578598663,"welfare_house":0.00012083070578598663,"intermediary":0.00012083070578598663,"security_company":0.00012083070578598663,"gift_store":0.00012083070578598663,"muslim":0.00012083070578598663,"sum_probability":0.0004833228231439465,"lottery_station":0.00012083070578598663,"photography_store":0.00012083070578598663,"science_museum":0.00012083070578598663,"sports_store":0.00012083070578598663,"gas_station":0.00012083070578598663,"university":0.00012083070578598663,"primary_school":0.00012083070578598663,"outdoor":0.00012083070578598663,"motorcycle":0.00012083070578598663,"electricity_office":0.00012083070578598663,"library":0.00012083070578598663,"convention_center":0.00012083070578598663,"kinder_garten":0.00012083070578598663,"ticket_agent":0.00012083070578598663,"snack_bar":0.00012083070578598663,"hotel":0.3291069199187668,"cosmetics_store":0.00012083070578598663,"adult_education":0.00012083070578598663,"telecom_offices":0.00012083070578598663,"pet_market":0.00012083070578598663,"housekeeping":0.00012083070578598663,"antique_store":0.00012083070578598663,"seafood":0.00012083070578598663,"gallery":0.00012083070578598663,"bbq":0.00012083070578598663,"water_supply_office":0.00012083070578598663,"other_infrastructure":0.00012083070578598663,"residence":0.20685038981445814,"clinic":0.00012083070578598663,"internet_bar":0.00012083070578598663,"commodity_market":0.00012083070578598663,"guest_house":0.00012083070578598663,"clothing_store":0.00012083070578598663,"farmers_market":0.00012083070578598663,"flea_market":0.00012083070578598663,"jewelry_store":0.00012083070578598663,"training_institutions":0.00012083070578598663,"post_office":0.00012083070578598663,"mother_store":0.00012083070578598663,"supermarket":0.00012083070578598663,"economy_hotel":0.00012083070578598663,"glass_store":0.00012083070578598663,"public_utilities":0.00012083070578598663,"dessert":0.00012083070578598663,"cooler":0.00012083070578598663,"emergency_center":0.00012083070578598663,"car_wash":0.00012083070578598663,"parking_plot":0.00012083070578598663,"chinese_restaurant":0.00012083070578598663,"atm":0.00012083070578598663,"museum":0.00012083070578598663}
//
//
//b = {"hospital":0.00006200934705598368,"bath_sauna":0.00006200934705598368,"drugstore":0.00006200934705598368,"vegetarian_diet":0.00006200934705598368,"talent_market":0.00006200934705598368,"business_building":0.00006200934705598368,"comprehensive_market":0.00006200934705598368,"motel":0.00006200934705598368,"stationer":0.00006200934705598368,"high_school":0.00006200934705598368,"insurance_company":0.00006200934705598368,"resort":0.00006200934705598368,"digital_store":0.00006200934705598368,"cigarette_store":0.00006200934705598368,"pawnshop":0.00006200934705598368,"auto_sale":0.00006200934705598368,"japan_korea_restaurant":0.00006200934705598368,"toll_station":0.00006200934705598368,"salvage_station":0.00006200934705598368,"newstand":0.00006200934705598368,"western_restaurant":0.00006200934705598368,"car_maintenance":0.00006200934705598368,"barbershop":0.00006200934705598368,"chafing_dish":0.00006200934705598368,"buffet":0.00006200934705598368,"convenience_store":0.00006200934705598368,"odeum":0.00006200934705598368,"pet_service":0.00006200934705598368,"traffic":0.00006200934705598368,"cinema":0.00006200934705598368,"coffee":0.00006200934705598368,"auto_repair":0.00006200934705598368,"bar":0.00006200934705598368,"hostel":0.00006200934705598368,"video_store":0.00006200934705598368,"game_room":0.00006200934705598368,"laundry":0.00006200934705598368,"photographic_studio":0.00006200934705598368,"ktv":0.00006200934705598368,"exhibition_hall":0.00006200934705598368,"bank":0.00006200934705598368,"night_club":0.00006200934705598368,"bike_store":0.00006200934705598368,"furniture_store":0.00006200934705598368,"travel_agency":0.00006200934705598368,"technical_school":0.00006200934705598368,"welfare_house":0.00006200934705598368,"intermediary":0.00006200934705598368,"security_company":0.00006200934705598368,"gift_store":0.00006200934705598368,"muslim":0.00006200934705598368,"lottery_station":0.00006200934705598368,"photography_store":0.00006200934705598368,"science_museum":0.00006200934705598368,"sports_store":0.00006200934705598368,"gas_station":0.00006200934705598368,"university":0.8851351490744129,"primary_school":0.00006200934705598368,"outdoor":0.00006200934705598368,"motorcycle":0.00006200934705598368,"electricity_office":0.00006200934705598368,"library":0.00006200934705598368,"convention_center":0.00006200934705598368,"kinder_garten":0.00006200934705598368,"ticket_agent":0.00006200934705598368,"snack_bar":0.00006200934705598368,"hotel":0.00006200934705598368,"cosmetics_store":0.00006200934705598368,"adult_education":0.00006200934705598368,"telecom_offices":0.00006200934705598368,"pet_market":0.00006200934705598368,"housekeeping":0.00006200934705598368,"antique_store":0.00006200934705598368,"seafood":0.00006200934705598368,"gallery":0.00006200934705598368,"bbq":0.00006200934705598368,"water_supply_office":0.00006200934705598368,"other_infrastructure":0.00006200934705598368,"residence":0.10847788817882123,"clinic":0.00006200934705598368,"internet_bar":0.00006200934705598368,"commodity_market":0.00006200934705598368,"guest_house":0.00006200934705598368,"clothing_store":0.00006200934705598368,"farmers_market":0.00006200934705598368,"flea_market":0.00006200934705598368,"jewelry_store":0.00006200934705598368,"training_institutions":0.00006200934705598368,"post_office":0.00006200934705598368,"mother_store":0.00006200934705598368,"supermarket":0.00006200934705598368,"economy_hotel":0.00006200934705598368,"glass_store":0.00006200934705598368,"public_utilities":0.00006200934705598368,"dessert":0.00006200934705598368,"cooler":0.00006200934705598368,"emergency_center":0.00006200934705598368,"car_wash":0.00006200934705598368,"parking_plot":0.00006200934705598368,"chinese_restaurant":0.00006200934705598368,"atm":0.00006200934705598368,"museum":0.00006200934705598368}
//
//
//c = {"home":0.00005923755624647211,"dining":0.0007108506749576655,"scenic_spot":0,"unknown":0.00005923755624647211,"exhibition":0.0003554253374788327,"entertainment":0.0006516131187111933,"healthcare":0.00023695022498588844,"estate":0.16043434799934886,"life_service":0.001007038456190026,"hotel":0.00029618778123236054,"office":0.00005923755624647211,"finance":0.00023695022498588844,"education":0.8338788466009904,"infrastructure":0.00023695022498588844,"auto_related":0.0004146628937253048,"shopping":0.0013624637936688582}
//
//
//sum = null
//
//Object.keys(c).forEach(function(m){
//  sum += c[m]
//})
//
//console.log(sum)


a =  {
    pois:"原始的位置信息和poi信息，相当于备份用",
    synced:"同步数据raw log里的数据用",
    userRawdataId: "该条UserLocation数据对应的raw log里的数据的objectId",
    isTrainingSample: "旧算法采用的标志该数据是否为训练数据",
    pois:"原始的位置信息和poi信息，相当于备份用",
    synced:" 同步数据raw log里的数据用",
    userRawdataId:"该条UserLocation数据对应的raw log里的数据的objectId",
    isTrainingSample:"旧算法采用的标志该数据是否为训练数据"
}

console.log(a)

//
//function isEven(num){
//    if(num === 0 ){
//        return true;
//    }
//    if(num === 1 ){
//        return false;
//    }
//
//    return isEven(Math.abs(num)- 2)
//}
//
//console.log(isEven(1000000000000000))


//utf8_str = "\u001f�\b\u0000\u0000\u0000\u0000\u0000\u0000\u0000�X�n\u001bW\f�\u0017=+\u0001/����\u000f\u0004y\u0010\f?\u0014��\"N\u0002\u0014E������ڳ��k\u0003��ݕ搜�������\u000fO�\u000f���5&��������o��vw��==���׷�\u000e�\u000f����~���Ǐ����\u0017�L�j\u0019޼eӰ�'\\çI6��+L��,�6J!e����\u0017�Ӣ\u0006ߓ<EC�M`Gx�K�Ν\u001b��\u000e�$�$E\u0004\u0011��\u0001�,��'�צ\u001c����n-Ҧ���b���x��R���fB\u0019�D�Z\u0000\u001a\tOfof\u0014�W\u0002o���+��\u0014SF���֥s��Y<\u0000b�\u001a��w��P\u0004�ȹ\f�sע�L���\u001c�\u001b\u001a�,9�k�s\u001eٚA\\\u0016��*lO�ۼ��\u0011�2=��\u0007��bя����w�9\u0003� ���%��\b\u001f\u000f�I���\u001eTC��x\u0001F)���r�v�\u0006�����3jz��֎�*\u001av��x�&�YG�4h��\u00034�\u001d��;��\\�.Q�\u001b�[�믢�X�Z\u000f\u001c�M�_�=�^�ݠ՘v��]_I�\u0010���+�\u001e5�e��\u000f�)�����N<�\u0006�z�V�\u001bŞM\b\bW\u001b�\u0011E��\r\u000f�g�͝��$�cQ]NW�ᑙ���ZͺNk�^���T\u0002�,�\u000bb�t�z\u001a�\u0016��\u0016�*\u0012�w��M\u0016��K7�8���f\fbl��h~�m�\u0006=nU�`�[�t�ޚ�\u001d\u0007\u0007')𸩬�\u001b\rok7G�d��*�uFj�cQY��E�1\u0015��Em\r\u0017��ల΂�\u000f��ZRL`^۔=\u001a[��]x�eh�[��v�1�EMo����[s�|���p���̴VM\n�d���!��v�&�j�u%��R0\u0012\r*��f�׭%���oe�E\u0017V��\u0003����돹���֦T��[�\u001ar=;8�!Sk��m\\5��}2���C�\f��ނ�6v{6]\tݹ�\u000e��vA�UtC΋\u001a�O\u000e#'����\u0015����\u001a2U\u0014�\u0000���\b��Jm0H�j.ǔ���+�\u0007�&��mȺ|,:��V�;KQl�/@�C��\u0019\n�~�ra��Y��!x<9\u001d�J�&����Ƭ'�C��'��\u001f�:��a\u0018\u0000\u0000"
//utf8_str.
//zip = require("zlib")
//
//
//zip.Gunzip(utf8_str,function(err, buffer){
//    console.log(JSON.stringify(err))
//    console.log(JSON.stringify(buffer))
//    if(!err){
//        console.log(buffer.toString())
//    }
//})
zlib = require("zlib");
hzip = require("hzip");

var obj = {
    "events": "H4sIAAAAAAAAAK1c244cxw39l33eDKpYrCKpj8gPGH5YCHoIECWBZRsIgvx7Tu109+x2VfeQ6liwbGt35wyv55DN8S//efn9b9+//fj97fu/Xr5k5pxKKi0p5deXt69f//jt7eu/X76U15cf3/7x45+//fXt+7eXL/0rL68vf779/Y9vP16+/PKXcjP8HNdWmayp1Fe+FWIpUlmVNFN9lVtT5VwrSWF84df/vh6Ba42Bc81WWPEKtXSoestVybiJ3LEArsYfvuUY3GqJgSdK/AGp3qi1LFxy49Te7a74FoN3AJFrOwHP+MaL4C0b5WYZ5t590brlCV/XVt4DcYKuEkGnm2iFvyizruhkKZfUcqXN71Qlc875GXquHLOdDI7Vpm0FG1yvN60VxsvyDo/BKZbvBEsVPk4KV9+x6k2Q/ikRXnMNfEMpGAkx0uocXi0GT8rG1KjZmvEIA6xs+ki7/iVtqdQnSVdqi4FnllatpCxVdEEvyZiVmHKvfu05X1rNmdAWUPfH6EyheoPpUjO3LeW4UclJbKktQCP9UqtNij7JOLZQtdGNMww0Rc5LWtzOyOuG4l7ant6EpZImQSJ2Vxyj1xqstkrps5f5Jla5IhS0oAEfkSHB+0x03mVzo1C90a20wqkUupvOPeZNUm5t87ymhqBba/LujWNs/FgQ20iJqL0D8Q3vI6PBayl2zwO7ZfxrQgOtxdJpukvVIDZxFjIpSwPt3NYK+h6MXb0uYEwTfBej/Z6lu1Kw2KhUyyhSWUsd6GCS2tAA8tbmCiqRLVN+0mjUgtW2DzqhoyahtDV9eJ7QCbboHGNbC5ZbqmAuNE9w+SG8dnprRVfOOXY9fihYcJ86DdzOUBAgPFrZFmGvghRkkfesKyfYFiy2ZNpTtRa5h7TbDnZrVvJGrnoD+RBUV6p8Wm9QBBSEL8hmFHJJWhf4XLT3P7yn5Y8Aj4qQbpv02J+YTxTkt9zwkk15bbSAF2kICNJR2tJuoOha454Qp30e4NGaq1Cp5cGliD0iX8pG9oHIo4CCFVd7xX9QcNx5x2CsPkxH30Fe5DU8x/BcohyHWkdrW4j7nvhWkIZbFYJjRFXwC33Rzsid2IK9lkFd6KRVba06aAi4HEFMssJjrJACxV+e2A4NcBk9ATJ/BPfyK9ghyHE1J/hr8/oI7ZUWECRBtz+FxiviD+sid0/SXVqw1iqbkCLFat3gB2EhBB2darmTzAk8FEEQPsHI/BBwE22ht177RdtaEsfwlqLVlpAnpfd1WzUdd6bCKLZmWDcfOqPij/Rc2nQTriY8EzIMYqIt81qPvSLsKWt9wjL4O0hy+Ell/bAj4N5+EHaovZX3YL02aLb+xvokcxx8jAFBlitSICQE9ChHWwt3t8HQGeQ4xgQifQxYxftcYkD4sWyC5xgfTHM990bvIxsTJ13q87jXF/x2megg9tBB1kyLWF/k/8BzmAipB2WZ1/37gx6s4P6A9/pqQnQNrkfnYXuyPyg1BSuvFUFHp2VeuccerR0tb8v0AOFg+ghW3iz3RpHjrDzI/6C6BRJGJiTAXTp2eYmxOqHr6WN35Pa+pOuVt+87dsPbQSso+b7HOGl7cNIltgelqln7oO+84hbBilbdQDiTsQJ+wTjdOL8LgBN4S9cmul5qGC83ZoXXEzim05I92RNjPoqS3Rj0Ps/AF2nJQn/BceJr4hJkAcMfK2l/q8M/gtWGCRX6bdnL9IiDTUAnJdFGct4ZHgPH5VEuGSiH+sp1qXODmMecmZr2RnMCjmEqCN4gHJFeJT36DCmyOsm2KAULIAnWnd4xONRNEDw/md4Bh+BTvWf/cZkhRsEymzD76HV0NWO1O9meeB1/Xd6YweNGlWzb0ip0Z1+nPHkgwyDly3ubJLbb0TrXNqibaKl9ijleBCOTflpbeBsMfgU3NnhZ/JzZOrZMC925sgFNBEstKZjzw3Ombj5Eq6QPrScAr9FV5Rj2mfWp63tK9657UnEQQRH8fIPbYWZen3nMrAe3EQqwbg+ojuGRL9ezvprVD3vhbr4gOZ/rKfBUtOhyf3IreXsOOvd+Lcj+9XnlcceBmA5OcpNF9b7o/coCLSf0+HsO/9O5X7MGSw+uZvTy+hDTGBgxyVLZZmjvohhsFC28cVE9ZB58rwlvIa+742N8lFAQXwzZl5LJ+mxqlvjezCuxy4d56MHq8L+mx5reSbXQg8HC2/HNZ5YNuB1Jdz3sqTd/tfxYG7r9XqN+n+T8YDwkyOPR2TF2i909zG0fCs4bcoldnACdDfIqNX5Iu13CwfSEOn7OM5A30Wqb8MwocjBg4b/gk3Q+viLqUdcnaDYrH4aJIepO0y16cDLJuEnC+xi2mgbrDWoamsTuHr2jY3hGXZXHrs4JDtkbbXKIJgKPF1+2BgUhzqB2tseO3Bv0futz2fbP5eaOesvRi5M9vUwtd/qdogcnGRMbLK0nte6ndnxbsNiGM6Np0jmH91YsWnC7sMP1LStgeN2Zuns8ZFeU3yYpr7mmx+Nvv5zvquriLDemHeAFQhUTx/052Ynna/TmZAb/08a38NXJnmOAzkTSPpQh8Es/tCzazufoJtGjk5nxkpuxcaPHmtLrfIkenvhi7+x38OQ1lpsYH2g5RtGy2w+S06J3Go8x4PIsMcgLZ9wlRc9OZh1nNN05w0qOnp2kfkRGOa8qboruHCckW1RX7rdHgAdfoW/bQquBloOsjNbcnmjnLcdHNkiOaNFN4OunE4RA5Ev09mQ/UMzAvZ7HIHw98JNu62v2UqPXJ5N2h/4LPVNrW2aMQNq36PXJxPV9aQFrtxtjwPfV4naRcIIevbaaMc2Y9d673v7+Ljt/UBm+Vi8avWeeYO897x/iRaN3PxNtu2t3fpYVK1F5uRf2M887+42m6NnJxPZJxfuSXlP07GQyTO7HeH/Oa46enczE7U+zvFL07CRXYcxuzOuNyQweEggdEFn9/h6P015Jru9QhkneSTVawkcnE6oZst5HNIqZ9+LFy1TVM5Qlid6n+xPHc/TcZ2b7CO/TN4qqCIbdMInUx0eEpuCZSn9Gfi/5E9tb9OYEwwR8TizrXdcU3hn4Fr06mejqCcfi1fv5U3rybAiiLPpkbry0+vm1ZU/Mi0PNdFvtDX1vT5fX1ZMHc06i7Z9gvbquHq4wfJ7vc+lF6OHwxfk8EkQcLbiBYifHfd51MeomVHGzR/HDVav38gYtIVpvk8/t7D8445a10D/Rj8plVBm4MaftmH92h+DUF1b4esHlquiBKS+3QP684+gJyv4D8LMTBGepQ/VHdSVmALXHaeNQ6d4TO6ux25OJqOPedwUjq5a1x/bbXry95WMzJ+gtenoyQZ98VMxdcS18ezJJuaHVOe9+MOlFCW58/p9zN7LJ/eMSoS6v0cuTUVDP0L2tVqOXJ05+dY7RZuG7n2FhO/uQpMv5ghZ1+fRkSDzfTS+wNSorR2E1kKx7oBBURbTqxiuEoeG5Tjz7Z0uuDnKD492aEujhi5/B8lnO+RoOBpLY/+3ElfLeaUYSR49PJgP8Tx7XAjx8fDI5MR30dCmYT/Py2fwTx9fw6Ymv07vEjeDdRgtujPte3vjj3sLnJyPPTLqNT1aCHcIHKJ7I71nu1/8B1j++U1xJAAA="
}

var input = '[{"timestamp":1441007491105,"accuracy":2,"sensorName":"acc","values":[0.0686492919921875,-0.10296630859375,10.14007568359375]},{"timestamp":1441007491307,"accuracy":2,"sensorName":"acc","values":[0.0686492919921875,-0.0931549072265625,10.144973754882813]},{"timestamp":1441007491507,"accuracy":2,"sensorName":"acc","values":[0.078460693359375,-0.0490264892578125,10.15478515625]},{"timestamp":1441007491708,"accuracy":2,"sensorName":"acc","values":[0.0882568359375,-0.058837890625,10.11065673828125]},{"timestamp":1441007491910,"accuracy":2,"sensorName":"acc","values":[0.0686492919921875,-0.07354736328125,10.14007568359375]},{"timestamp":1441007492111,"accuracy":2,"sensorName":"acc","values":[0.0686492919921875,-0.0048980712890625,10.120452880859375]},{"timestamp":1441007492313,"accuracy":2,"sensorName":"acc","values":[0.0637359619140625,-0.01470947265625,10.130264282226563]},{"timestamp":1441007492514,"accuracy":2,"sensorName":"acc","values":[0.04412841796875,-0.07354736328125,10.15478515625]},{"timestamp":1441007492715,"accuracy":2,"sensorName":"acc","values":[0.0637359619140625,-0.0539398193359375,10.14007568359375]},{"timestamp":1441007492917,"accuracy":2,"sensorName":"acc","values":[0.07354736328125,-0.0294189453125,10.164581298828125]},{"timestamp":1441007493125,"accuracy":2,"sensorName":"acc","values":[0.0980682373046875,-0.0294189453125,10.19891357421875]},{"timestamp":1441007493320,"accuracy":2,"sensorName":"acc","values":[0.0490264892578125,-0.058837890625,10.179290771484375]},{"timestamp":1441007493521,"accuracy":2,"sensorName":"acc","values":[0.058837890625,-0.0882568359375,10.135162353515625]},{"timestamp":1441007493723,"accuracy":2,"sensorName":"acc","values":[0.0637359619140625,-0.053924560546875,10.14007568359375]},{"timestamp":1441007493924,"accuracy":2,"sensorName":"acc","values":[0.058837890625,-0.058837890625,10.144973754882813]},{"timestamp":1441007494125,"accuracy":2,"sensorName":"acc","values":[0.058837890625,-0.058837890625,10.159683227539063]},{"timestamp":1441007494327,"accuracy":2,"sensorName":"acc","values":[0.078460693359375,-0.053924560546875,10.105758666992188]},{"timestamp":1441007494528,"accuracy":2,"sensorName":"acc","values":[0.0686492919921875,-0.058837890625,10.174392700195313]},{"timestamp":1441007494730,"accuracy":2,"sensorName":"acc","values":[0.0980682373046875,-0.0686492919921875,10.11065673828125]},{"timestamp":1441007494931,"accuracy":2,"sensorName":"acc","values":[0.0833587646484375,-0.0833587646484375,10.130264282226563]},{"timestamp":1441007495133,"accuracy":2,"sensorName":"acc","values":[0.07354736328125,-0.078460693359375,10.144973754882813]},{"timestamp":1441007495335,"accuracy":2,"sensorName":"acc","values":[0.07354736328125,-0.07354736328125,10.179290771484375]},{"timestamp":1441007495535,"accuracy":2,"sensorName":"acc","values":[0.07354736328125,-0.07354736328125,10.144973754882813]},{"timestamp":1441007495737,"accuracy":2,"sensorName":"acc","values":[0.0931549072265625,-0.053924560546875,10.135177612304688]},{"timestamp":1441007495938,"accuracy":2,"sensorName":"acc","values":[0.0833587646484375,-0.0245208740234375,10.194000244140625]},{"timestamp":1441007496140,"accuracy":2,"sensorName":"acc","values":[0.0882568359375,-0.0196075439453125,10.144973754882813]},{"timestamp":1441007496341,"accuracy":2,"sensorName":"acc","values":[0.0833587646484375,-0.04412841796875,10.208709716796875]},{"timestamp":1441007496543,"accuracy":2,"sensorName":"acc","values":[0.0931549072265625,-0.053924560546875,10.194015502929688]},{"timestamp":1441007496744,"accuracy":2,"sensorName":"acc","values":[0.0833587646484375,-0.078460693359375,10.1842041015625]},{"timestamp":1441007496945,"accuracy":2,"sensorName":"acc","values":[0.0980682373046875,-0.0686492919921875,10.159683227539063]},{"timestamp":1441007497147,"accuracy":2,"sensorName":"acc","values":[0.1078643798828125,-0.0637359619140625,10.115554809570313]},{"timestamp":1441007497348,"accuracy":2,"sensorName":"acc","values":[0.0980682373046875,-0.0686492919921875,10.120452880859375]},{"timestamp":1441007497549,"accuracy":2,"sensorName":"acc","values":[0.10296630859375,-0.0490264892578125,10.130264282226563]},{"timestamp":1441007497751,"accuracy":2,"sensorName":"acc","values":[0.0980682373046875,-0.058837890625,10.130264282226563]},{"timestamp":1441007497952,"accuracy":2,"sensorName":"acc","values":[0.0882568359375,-0.058837890625,10.130264282226563]},{"timestamp":1441007498154,"accuracy":2,"sensorName":"acc","values":[0.07354736328125,-0.058837890625,10.14007568359375]},{"timestamp":1441007498355,"accuracy":2,"sensorName":"acc","values":[0.0931549072265625,-0.04412841796875,10.15478515625]},{"timestamp":1441007498556,"accuracy":2,"sensorName":"acc","values":[0.10296630859375,-0.058837890625,10.15478515625]},{"timestamp":1441007498758,"accuracy":2,"sensorName":"acc","values":[0.0686492919921875,-0.0686492919921875,10.1253662109375]},{"timestamp":1441007498960,"accuracy":2,"sensorName":"acc","values":[0.0637359619140625,-0.053924560546875,10.174392700195313]},{"timestamp":1441007499161,"accuracy":2,"sensorName":"acc","values":[0.0833587646484375,-0.053924560546875,10.1842041015625]},{"timestamp":1441007499362,"accuracy":2,"sensorName":"acc","values":[0.0931549072265625,-0.0784454345703125,10.174392700195313]},{"timestamp":1441007499564,"accuracy":2,"sensorName":"acc","values":[0.0931549072265625,-0.0637359619140625,10.15478515625]},{"timestamp":1441007499765,"accuracy":2,"sensorName":"acc","values":[0.0686492919921875,-0.0539398193359375,10.14007568359375]},{"timestamp":1441007499967,"accuracy":2,"sensorName":"acc","values":[0.0980682373046875,-0.0784454345703125,10.1842041015625]},{"timestamp":1441007500169,"accuracy":2,"sensorName":"acc","values":[0.07354736328125,-0.053924560546875,10.1253662109375]},{"timestamp":1441007500370,"accuracy":2,"sensorName":"acc","values":[0.07354736328125,-0.0686492919921875,10.130264282226563]},{"timestamp":1441007500571,"accuracy":2,"sensorName":"acc","values":[0.07354736328125,-0.0637359619140625,10.135162353515625]},{"timestamp":1441007500772,"accuracy":2,"sensorName":"acc","values":[0.0931549072265625,-0.058837890625,10.1253662109375]}]'
//var input = '[{"timestamp":1441007491105,"accuracy":2,"sensorName":"acc","values":[0.0686492919921875,-0.10296630859375,10.14007568359375]},{"timestamp":1441007491307,"accuracy":2,"sensorName":"acc","values":[0.0686492919921875,-0.0931549072265625,10.144973754882813]},{"timestamp":1441007491507,"accuracy":2,"sensorName":"acc","values":[0.078460693359375,-0.0490264892578125,10.15478515625]},{"timestamp":1441007491708,"accuracy":2,"sensorName":"acc","values":[0.0882568359375,-0.058837890625,10.11065673828125]},{"timestamp":1441007491910,"accuracy":2,"sensorName":"acc","values":[0.0686492919921875,-0.07354736328125,10.14007568359375]},{"timestamp":1441007492111,"accuracy":2,"sensorName":"acc","values":[0.0686492919921875,-0.0048980712890625,10.120452880859375]},{"timestamp":1441007492313,"accuracy":2,"sensorName":"acc","values":[0.0637359619140625,-0.01470947265625,10.130264282226563]},{"timestamp":1441007492514,"accuracy":2,"sensorName":"acc","values":[0.04412841796875,-0.07354736328125,10.15478515625]},{"timestamp":1441007492715,"accuracy":2,"sensorName":"acc","values":[0.0637359619140625,-0.0539398193359375,10.14007568359375]},{"timestamp":1441007492917,"accuracy":2,"sensorName":"acc","values":[0.07354736328125,-0.0294189453125,10.164581298828125]},{"timestamp":1441007493125,"accuracy":2,"sensorName":"acc","values":[0.0980682373046875,-0.0294189453125,10.19891357421875]},{"timestamp":1441007493320,"accuracy":2,"sensorName":"acc","values":[0.0490264892578125,-0.058837890625,10.179290771484375]},{"timestamp":1441007493521,"accuracy":2,"sensorName":"acc","values":[0.058837890625,-0.0882568359375,10.135162353515625]},{"timestamp":1441007493723,"accuracy":2,"sensorName":"acc","values":[0.0637359619140625,-0.053924560546875,10.14007568359375]},{"timestamp":1441007493924,"accuracy":2,"sensorName":"acc","values":[0.058837890625,-0.058837890625,10.144973754882813]},{"timestamp":1441007494125,"accuracy":2,"sensorName":"acc","values":[0.058837890625,-0.058837890625,10.159683227539063]},{"timestamp":1441007494327,"accuracy":2,"sensorName":"acc","values":[0.078460693359375,-0.053924560546875,10.105758666992188]},{"timestamp":1441007494528,"accuracy":2,"sensorName":"acc","values":[0.0686492919921875,-0.058837890625,10.174392700195313]},{"timestamp":1441007494730,"accuracy":2,"sensorName":"acc","values":[0.0980682373046875,-0.0686492919921875,10.11065673828125]},{"timestamp":1441007494931,"accuracy":2,"sensorName":"acc","values":[0.0833587646484375,-0.0833587646484375,10.130264282226563]},{"timestamp":1441007495133,"accuracy":2,"sensorName":"acc","values":[0.07354736328125,-0.078460693359375,10.144973754882813]},{"timestamp":1441007495335,"accuracy":2,"sensorName":"acc","values":[0.07354736328125,-0.07354736328125,10.179290771484375]},{"timestamp":1441007495535,"accuracy":2,"sensorName":"acc","values":[0.07354736328125,-0.07354736328125,10.144973754882813]},{"timestamp":1441007495737,"accuracy":2,"sensorName":"acc","values":[0.0931549072265625,-0.053924560546875,10.135177612304688]},{"timestamp":1441007495938,"accuracy":2,"sensorName":"acc","values":[0.0833587646484375,-0.0245208740234375,10.194000244140625]},{"timestamp":1441007496140,"accuracy":2,"sensorName":"acc","values":[0.0882568359375,-0.0196075439453125,10.144973754882813]},{"timestamp":1441007496341,"accuracy":2,"sensorName":"acc","values":[0.0833587646484375,-0.04412841796875,10.208709716796875]},{"timestamp":1441007496543,"accuracy":2,"sensorName":"acc","values":[0.0931549072265625,-0.053924560546875,10.194015502929688]},{"timestamp":1441007496744,"accuracy":2,"sensorName":"acc","values":[0.0833587646484375,-0.078460693359375,10.1842041015625]},{"timestamp":1441007496945,"accuracy":2,"sensorName":"acc","values":[0.0980682373046875,-0.0686492919921875,10.159683227539063]},{"timestamp":1441007497147,"accuracy":2,"sensorName":"acc","values":[0.1078643798828125,-0.0637359619140625,10.115554809570313]},{"timestamp":1441007497348,"accuracy":2,"sensorName":"acc","values":[0.0980682373046875,-0.0686492919921875,10.120452880859375]},{"timestamp":1441007497549,"accuracy":2,"sensorName":"acc","values":[0.10296630859375,-0.0490264892578125,10.130264282226563]},{"timestamp":1441007497751,"accuracy":2,"sensorName":"acc","values":[0.0980682373046875,-0.058837890625,10.130264282226563]},{"timestamp":1441007497952,"accuracy":2,"sensorName":"acc","values":[0.0882568359375,-0.058837890625,10.130264282226563]},{"timestamp":1441007498154,"accuracy":2,"sensorName":"acc","values":[0.07354736328125,-0.058837890625,10.14007568359375]},{"timestamp":1441007498355,"accuracy":2,"sensorName":"acc","values":[0.0931549072265625,-0.04412841796875,10.15478515625]},{"timestamp":1441007498556,"accuracy":2,"sensorName":"acc","values":[0.10296630859375,-0.058837890625,10.15478515625]},{"timestamp":1441007498758,"accuracy":2,"sensorName":"acc","values":[0.0686492919921875,-0.0686492919921875,10.1253662109375]},{"timestamp":1441007498960,"accuracy":2,"sensorName":"acc","values":[0.0637359619140625,-0.053924560546875,10.174392700195313]},{"timestamp":1441007499161,"accuracy":2,"sensorName":"acc","values":[0.0833587646484375,-0.053924560546875,10.1842041015625]},{"timestamp":1441007499362,"accuracy":2,"sensorName":"acc","values":[0.0931549072265625,-0.0784454345703125,10.174392700195313]},{"timestamp":1441007499564,"accuracy":2,"sensorName":"acc","values":[0.0931549072265625,-0.0637359619140625,10.15478515625]},{"timestamp":1441007499765,"accuracy":2,"sensorName":"acc","values":[0.0686492919921875,-0.0539398193359375,10.14007568359375]},{"timestamp":1441007499967,"accuracy":2,"sensorName":"acc","values":[0.0980682373046875,-0.0784454345703125,10.1842041015625]},{"timestamp":1441007500169,"accuracy":2,"sensorName":"acc","values":[0.07354736328125,-0.053924560546875,10.1253662109375]},{"timestamp":1441007500370,"accuracy":2,"sensorName":"acc","values":[0.07354736328125,-0.0686492919921875,10.130264282226563]},{"timestamp":1441007500571,"accuracy":2,"sensorName":"acc","values":[0.07354736328125,-0.0637359619140625,10.135162353515625]},{"timestamp":1441007500772,"accuracy":2,"sensorName":"acc","values":[0.0931549072265625,-0.058837890625,10.1253662109375]}]';
var input_events = obj.events
var gunzip = new zlib.createGunzip();
console.log(input_events);
var events_buffer = new Buffer(input_events, "base64")
//events_buffer.pipe(gunzip).pipe(buff)

//
zlib.unzip(events_buffer,function(err, buffer){
    console.log(JSON.stringify(err))
    console.log(JSON.stringify(buffer.toString()))

})





function fD(a, b, c) {
    for (; a > c;)
        a -= c - b;
    for (; a < b;)
        a += c - b;
    return a;
};
function jD(a, b, c) {
    b != null && (a = Math.max(a, b));
    c != null && (a = Math.min(a, c));
    return a;
};
function yk(a) {
    return Math.PI * a / 180
};
function Ce(a, b, c, d) {
    var dO = 6370996.81;
    return dO * Math.acos(Math.sin(c) * Math.sin(d) + Math.cos(c) * Math.cos(d) * Math.cos(b - a));
};
function getDistance(a, b) {
    if (!a || !b)
        return 0;
    a.lng = fD(a.lng, -180, 180);
    a.lat = jD(a.lat, -74, 74);
    b.lng = fD(b.lng, -180, 180);
    b.lat = jD(b.lat, -74, 74);
    return Ce(yk(a.lng), yk(b.lng), yk(a.lat), yk(b.lat));
};
console.log("fuck")
event_geo = {lng:116.439643,lat:39.9263871}
user_geo = {lat:39.9267685,lng:116.433769}

console.log(getDistance(event_geo, user_geo))
console.log(getDistance({lng : 116.309101, lat: 39.9805045},{lng : 116.3092094,lat :39.9803396}));
console.log("fuck hi")


//console.log("err")

//zlib.gzip(input, function(err, buffer) {
//    if (!err) {
//        base64_string = buffer.toString("base64")
//        console.log(base64_string);
//
//        base64_buffer = new Buffer(base64_string,"base64")
//        zlib.gunzip(base64_buffer,function(err, buffer){
//                  console.log(JSON.stringify(err))
//                  console.log(JSON.stringify(buffer.toString()))
//                  obj = JSON.parse(buffer.toString())
//                  console.log(JSON.stringify(obj[0]))
//        })
//    }
//});

//
//var buffer = new Buffer("\u001f�\b\u0000\u0000\u0000\u0000\u0000\u0000\u0000�X�n\u001bW\f�\u0017=+\u0001/����\u000f\u0004y\u0010\f?\u0014��\"N\u0002\u0014E������ڳ��k\u0003��ݕ搜�������\u000fO�\u000f���5&��������o��vw��==���׷�\u000e�\u000f����~���Ǐ����\u0017�L�j\u0019޼eӰ�'\\çI6��+L��,�6J!e����\u0017�Ӣ\u0006ߓ<EC�M`Gx�K�Ν\u001b��\u000e�$�$E\u0004\u0011��\u0001�,��'�צ\u001c����n-Ҧ���b���x��R���fB\u0019�D�Z\u0000\u001a\tOfof\u0014�W\u0002o���+��\u0014SF���֥s��Y<\u0000b�\u001a��w��P\u0004�ȹ\f�sע�L���\u001c�\u001b\u001a�,9�k�s\u001eٚA\\\u0016��*lO�ۼ��\u0011�2=��\u0007��bя����w�9\u0003� ���%��\b\u001f\u000f�I���\u001eTC��x\u0001F)���r�v�\u0006�����3jz��֎�*\u001av��x�&�YG�4h��\u00034�\u001d��;��\\�.Q�\u001b�[�믢�X�Z\u000f\u001c�M�_�=�^�ݠ՘v��]_I�\u0010���+�\u001e5�e��\u000f�)�����N<�\u0006�z�V�\u001bŞM\b\bW\u001b�\u0011E��\r\u000f�g�͝��$�cQ]NW�ᑙ���ZͺNk�^���T\u0002�,�\u000bb�t�z\u001a�\u0016��\u0016�*\u0012�w��M\u0016��K7�8���f\fbl��h~�m�\u0006=nU�`�[�t�ޚ�\u001d\u0007\u0007')𸩬�\u001b\rok7G�d��*�uFj�cQY��E�1\u0015��Em\r\u0017��ల΂�\u000f��ZRL`^۔=\u001a[��]x�eh�[��v�1�EMo����[s�|���p���̴VM\n�d���!��v�&�j�u%��R0\u0012\r*��f�׭%���oe�E\u0017V��\u0003����돹���֦T��[�\u001ar=;8�!Sk��m\\5��}2���C�\f��ނ�6v{6]\tݹ�\u000e��vA�UtC΋\u001a�O\u000e#'����\u0015����\u001a2U\u0014�\u0000���\b��Jm0H�j.ǔ���+�\u0007�&��mȺ|,:��V�;KQl�/@�C��\u0019\n�~�ra��Y��!x<9\u001d�J�&����Ƭ'�C��'��\u001f�:��a\u0018\u0000\u0000", 'utf8');
//zlib.unzip(buffer, function(err, buffer) {
//
//
//    console.log(JSON.stringify(err))
//     console.log(JSON.stringify(buffer))
//
//    if (!err) {
//        console.log(buffer.toString());
//    }
//});